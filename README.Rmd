---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Last-changedate](https://img.shields.io/badge/last%20change-`r gsub('-', '--', Sys.Date())`-brightgreen.svg)](https://github.com/bramzandbelt/irmass/commits/master) 
[![minimal R version](https://img.shields.io/badge/R%3E%3D-`r as.character(getRversion())`-brightgreen.svg)](https://cran.r-project.org/)
[![Task DOI](https://zenodo.org/badge/49258308.svg)](https://zenodo.org/badge/latestdoi/49258308)
[![Licence](https://img.shields.io/github/license/mashape/apistatus.svg)](http://choosealicense.com/licenses/mit/) 
[![ORCiD](https://img.shields.io/badge/ORCiD-0000--0002--6491--1247-green.svg)](https://orcid.org/0000-0002-6491-1247)

# irmass - Research compendium for the report on independent race model analysis of selective stopping by Zandbelt & Van den Bosch

## Compendium DOI
<!-- TODO: Add Zenodo DOI -->

The files at the URL above will generate the results as found in the preprint. The files hosted at [https://github.com/bramzandbelt/irmass](https://github.com/bramzandbelt/irmass) are the development versions and may have changed since the preprint was published.

## Author of this repository
Bram Zandbelt ([bramzandbelt@gmail.com](mailto:bramzandbelt@gmail.com))

## Published in:

TBA

<!-- TODO: Add PsyArXiv DOI and Bibliography
```
 
```
-->

## Overview of contents

The packagae `irmass` is one of two research compendia of the research project _Cognitive and Neurobiological Mechanisms of Selective Stopping_ by Bram Zandbelt and Ruben van den Bosch (the other research compendium, `cnmss`, can be found [here](github.com/bramzandbelt/cnmss)<!-- TODO: Check Github URL -->). This project was conducted at the Donders Institute, Radboud University, Nijmegen, the Netherlands, and registered at the Donders Centre for Cognitive Neuroimaging under project number 3017031.05 (DCCN PI: Roshan Cools).

This research compendium contains all data, code, and text associated with the above-mentioned publication and is organized as follows:


```
.
├── MATLAB
├── R
├── analysis
│   ├── bash
│   └── notebooks_and_scripts
├── data
│   ├── derivatives
│   ├── raw
│   └── simulations
├── documents
│   ├── content
│   ├── context
│   └── manuscript
├── figures
│   ├── 01_preprocess_log_files
│   ├── 02_assess_task_performance_criteria
│   ├── 03_individual_analysis_effect_ssd_on_prob_responding_given_stopsignal
│   ├── 04_individual_analysis_rt_difference_nosignal_stoprespond
│   ├── 05_individual_analysis_effect_ssd_on_stoprespond_rt
│   ├── 07_group_analysis_rt_difference_nosignal_stoprespond
│   ├── 08_group_analysis_effect_ssd_on_stoprespond_rt
│   ├── 09_exploration_support_for_hypotheses_under_different_bayes_factor_criteria
│   ├── 10_exploration_support_for_hypotheses_under_different_priors
│   └── 11_analysis_of_simulated_race_model_data
├── man
├── opt
├── packrat
│   ├── lib
│   ├── lib-R
│   ├── lib-ext
│   └── src
└── reports
```

The `MATLAB/` directory contains:

- MATLAB code specific to the present project; specifically, for simulating the impact of race model violations on SSRT.

The `R/` directory contains:

- R code specific to the present project; functions are organized into files (e.g. functions for plotting are in `plot_functions.R`).

The `analysis/` directory contains:

- R Markdown notebooks implementing the analyses (`notebooks_and_scripts/` directory), numbered in the order in which they should be run;
- shell scripts running the R Markdown notebooks with appropriate parameters, if any (`bash/` directory).

The `data/` directory contains:

- the raw performance data (`raw/` directory), organized by subject index;
    - the performance data from the experiment session (`experiment/` directory):
        - `triallog_*.csv` contains the raw trial-by-trial data (see codebook in `documents/content/codebook_triallog.csv`)
        - `blocklog_*.csv` contains the block-by-block summary statistics of performance data (see codebook in `documents/content/codebook_blocklog.csv`)
        - `runtimeinfo_*.csv` contains runtime from PsychoPy (see [https://www.psychopy.org/api/info.html](https://www.psychopy.org/api/info.html))
    - the performance data from the practice session (`practice/` directory):
        - contains files in same format as under `experiment/`
- the data derived from the raw data (`derivatives/` directory), organized by notebook name.
    - for meaning of output variables, see notebook templates (`analysis/*.Rmd`) and static reports (`reports/`)
- the simulated performance data (`simulations/` directory)

The `documents/` directory contains:

- documents describing the content of the experimental data (`content/` directory), such as codebooks;
- documents describing the context of the data (`context/` directory), such as ethics documents and preregistration;
- documents related to the report of this research project (`manuscript/` directory).

The `figures/` directory contains:

- visualizations of descriptive and inferential statistics, organized by notebook name.

The `man/` directory contains:

- documentation of objects inside the package, generated by `roxygen2`.

The `opt` directory contains:

- MATLAB packages the research compendium depends on, including packages for:
    - making multipanel figures (`panel/`);
    
The `packrat/` directory contains:

- R packages the research compendium depends on; for more info see [https://rstudio.github.io/packrat/](https://rstudio.github.io/packrat/).

The `reports/` directory contains:

- static HTML versions of the knitted R Markdown notebooks, organized by notebook name.

Finally, this research compendium is associated with a number of online objects, including:

| object | archived version                 | development version              |
| ------ | -------------------------------- | -------------------------------- |
| preregistration | [https://osf.io/mq64z/](https://osf.io/mq64z/) | NA |
| stimulus presentation code | [https://doi.org/10.5281/zenodo.3243799](https://doi.org/10.5281/zenodo.3243799) | [github.com/bramzandbelt/StPy](github.com/bramzandbelt/StPy) |

## How to use

This repository is organized as an R package. The R package structure was used to help manage dependencies, to take advantage of continuous integration for automated code testing and documentation, and to be able to follow a standard format for file organization. The package `irmass` depends on other R packages and non-R programs, which are listed below under [Dependencies](#Dependencies).

To download the package source as you see it on GitHub, for offline browsing, use this line at the shell prompt (assuming you have Git installed on your computer):

Install `irmass` package from Github:

```{r Install irmass package, eval=FALSE}
devtools::install_github("bramzandbelt/irmass")
```

Once the download is complete, open the file `irmass.Rproj` in RStudio to begin working with the package and compendium files. To reproduce all analyses, run the shell script `analysis/bash/run_all_analyses.sh`. This will run all RMarkdown notebooks in correct order. It may take several hours to complete.

## Licenses

Manuscript: CC-BY-4.0 [http://creativecommons.org/licenses/by/4.0/](http://creativecommons.org/licenses/by/4.0/)

Code: MIT [http://opensource.org/licenses/MIT](http://opensource.org/licenses/MIT), year: 2019, copyright holder: Bram B. Zandbelt

Data: Data Use Agreement of Donders Institute <!-- TODO: Add URL -->


## Dependencies

Below is the output of `sessionInfo()`, showing version information about R, the OS, and attached or loaded packages:

```{r session_info, include=TRUE, echo=TRUE, results='markup'}
devtools::session_info()
```

For a complete list of the packrat Packrat takes care of dependencies.

## Acknowledgment

Thanks to Ben Marwick for inspiration on [how to create, organize, and describe research compendia](https://github.com/benmarwick/researchcompendium).

## Contact

[Bram B. Zandbelt](mailto:bramzandbelt@gmail.com)


```{r Ignore rest of document}
# Ignore rest of document
knitr::knit_exit()
```

### Data

<!-- TODO: Metadata below is useful to include in repository organization above -->

Data file names are

Analysis file names are organized in the order in which they should be run

File names consist of:
- data category
  - analysis_inputs
  - analysis_outputs
- notebook name
  
- primary content
  - `bf`: bayes factors
  - `rt`: response times
  - `resp`: response data
  - `fig`: figure
  - `param`: model parameters
  - `prd`: model predictions
  - `desc`: descriptive statistics
